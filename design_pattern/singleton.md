## **Singleton íŒ¨í„´**

<aside>
  
    ğŸ’¡ ê°ì²´ë¥¼ í•˜ë‚˜ë§Œ ìƒì„± í•˜ë„ë¡ í•˜ë©°, ìƒì„±ëœ ê°ì²´ë¥¼ ì–´ë””ì—ì„œë“ ì§€ ì°¸ì¡°í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” íŒ¨í„´

</aside>

- ìƒì„±(Creational) íŒ¨í„´ ì¢…ë¥˜ ì¤‘ í•˜ë‚˜ì´ë‹¤. (ê°ì²´ ìƒì„±ì— ê´€ë ¨ëœ íŒ¨í„´)
- í´ë˜ìŠ¤ì—ì„œ í•˜ë‚˜ë¿ì¸ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê´€ë¦¬í•˜ê³ , ì¸ìŠ¤í„´ìŠ¤ë¡œ ì¶”ê°€ë¡œ ë§Œë“¤ì§€ ëª»í•˜ë„ë¡ ë§‰ì•„ì•¼ í•œë‹¤
- ì–´ë””ì—ì„œë“ ì§€ ì°¸ì¡°í•  ìˆ˜ ìˆë„ë¡(ì „ì—­ ì ‘ê·¼ ê°€ëŠ¥) í•´ì•¼í•¨
- ì‹±ê¸€í„´ì€ ê²Œìœ¼ë¥¸ ë°©ì‹(ì´ˆê¸°ì— ìƒì„±ë˜ëŠ” ê²ƒì´ ì•„ë‹Œ ì‹±ê¸€í„´ìœ¼ë¡œ êµ¬í˜„í•˜ë ¤ëŠ” ê°ì²´ê°€ í•„ìš”í•  ë•Œ ìƒì„±í•˜ëŠ” ë°©ë²•)ìœ¼ë¡œ êµ¬í˜„í•  ìˆ˜ ë„ ìˆëŠ”ë°, ì´ ë°©ì‹ì€ ì‹±ê¸€í„´íŒ¨í„´ìœ¼ë¡œ ì ìš©ëœ ì¸ìŠ¤í„´ìŠ¤ê°€ ìì›ì„ ë§ì´ ì¡ì•„ë¨¹ëŠ”ë‹¤ë©´ ì´ëŸ° ê¸°ë²•ì´ ìœ ìš©í•¨

## **Singleton íŒ¨í„´** ì‚¬ìš©í•˜ëŠ” ì´ìœ 

<aside>
  
    ğŸ’¡ ë©”ëª¨ë¦¬ì— í•œë²ˆë§Œ í• ë‹¹ëœë‹¤ëŠ” ì¥ì ì´ ìˆë‹¤.

</aside>

- ìµœì´ˆë¡œ ë©”ëª¨ë¦¬ í• ë‹¹ í›„ì—ëŠ” ì´ë¯¸ ìƒì„±ëœ ì¸ìŠ¤í„´ìŠ¤ë¥¼ í™œìš©í•˜ì—¬, ë©”ëª¨ë¦¬/ì†ë„ ì¸¡ë©´ì—ì„œ íš¨ìœ¨ì ì´ë‹¤.
- ë˜í•œ ë°ì´í„° ê³µìœ ê°€ ì‰½ë‹¤. (ì‹±ê¸€í†¤ ì¸ìŠ¤í„´ìŠ¤ê°€ ì „ì—­ì—ì„œ ì ‘ê·¼ê°€ëŠ¥í•˜ê¸° ë–„ë¬¸ì—) ë‹¤ë§Œ, ë™ì‹œì„± ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤.

## **Singleton íŒ¨í„´ì˜** ë¬¸ì œì 

- ë©€í‹°ìŠ¤ë ˆë”© í™˜ê²½ì—ì„œ ë°œìƒí•  ìˆ˜ ìˆëŠ” ë™ì‹œì„± ë¬¸ì œ í•´ê²°ì„ ìœ„í•´ syncronized í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤.
- í…ŒìŠ¤íŠ¸í•˜ê¸° ì–´ë µë‹¤ â†’ ìì›ì„ ê³µìœ í•˜ê³  ìˆê¸°ì— í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•˜ë ¤ë©´ ë§¤ë²ˆ ì¸ìŠ¤í„´ìŠ¤ ìƒíƒœë¥¼ ì´ˆê¸°í™”í•´ì£¼ì–´ì•¼ í•œë‹¤.
- í´ë¼ì´ì–¸íŠ¸ê°€ êµ¬ì²´ì ì¸ í´ë˜ìŠ¤ì— ì˜ì¡´í•˜ê²Œ ëœë‹¤. â†’ SOLID ì›ì¹™ ì¤‘ DIPë¥¼ ìœ„ë°˜

**ì˜ˆì‹œ**

```java
public class Printer {

  private Printer() { }   // Printer ìƒì„±ìë¥¼ ì™¸ë¶€ì—ì„œ ì‚¬ìš© ë¶ˆê°€ -> ì‹±ê¸€í†¤

	public static Printer getPrinter(){   // ì–´ë””ì„œë“  ì™¸ë¶€ì—ì„œ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë„ë¡!
    if (printer == null) {
      printer = new Printer();
    }
    return printer;
  }
}
```

-----

> â—ğŸ” ë‹¤ì¤‘ ìŠ¤ë ˆë“œì—ì„œëŠ” ì‹±ê¸€í†¤ ì¸ìŠ¤í„´ìŠ¤ì— ë™ì‹œì— ì—¬ëŸ¬ ìŠ¤ë ˆë“œê°€ ì ‘ê·¼í•˜ëŠ” Race Condition ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤.
(Race Condition : ë©”ëª¨ë¦¬ì™€ ê°™ì€ ë™ì¼í•œ ìì›ì„ 2ê°œ ì´ìƒì˜ ìŠ¤ë ˆë“œê°€ ì´ìš©í•˜ë ¤ê³  ê²½í•©í•˜ëŠ” í˜„ìƒ)
> 

## ë©€í‹° ìŠ¤ë ˆë”© ë¬¸ì œ í•´ê²°ë°©ë²•

1. ì •ì  ë³€ìˆ˜ì— ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ì–´ ë°”ë¡œ ì´ˆê¸°í™”í•˜ëŠ” ë°©ë²• (Eager Initialization)
    - ì¸ìŠ¤í„´ìŠ¤ê°€ í•„ìš”í•  ë•Œ ìƒì„±í•˜ì§€ ë§ê³  ì²˜ìŒë¶€í„° ë§Œë“œëŠ” ë°©ë²•
    - ì–´í”Œë¦¬í…Œì´ì…˜ ì‹¤í–‰ ì¤‘ì— ìƒì„±í•˜ê³  ê´€ë¦¬í•˜ì§€ ì•Šê³  JVMì—ì„œ í´ë˜ìŠ¤ ë¡œë”©ë  ë•Œ ìƒì„±
    
    ```java
    public class Printer {
       // static ë³€ìˆ˜ì— ì™¸ë¶€ì— ì œê³µí•  ìê¸° ìì‹ ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ì–´ ì´ˆê¸°í™”
       private static Printer printer = new Printer();
       private Printer() { }
       // ìê¸° ìì‹ ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì™¸ë¶€ì— ì œê³µ
       public static Printer getPrinter(){
         return printer;
       }
       public void print(String str) {
         System.out.println(str);
       }
    }
    ```
    
2. ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“œëŠ” ë©”ì„œë“œì— ë™ê¸°í™”í•˜ëŠ” ë°©ë²• (Thread-Safe Initialization)
    - `synchronized` í‚¤ì›Œë“œë¥¼ í™œìš©í•˜ì—¬ ë™ê¸°í™”í•˜ê¸°! â†’ getInstance()ì— Lockì„ í•˜ëŠ” ë°©ì‹ì´ë¼ ì†ë„ê°€ ëŠë¦¬ë‹¤.
    
    ```java
    public class Printer {
       // ì™¸ë¶€ì— ì œê³µí•  ìê¸° ìì‹ ì˜ ì¸ìŠ¤í„´ìŠ¤
       private static Printer printer = null;
       private int counter = 0;
       private Printer() { }
       // ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“œëŠ” ë©”ì„œë“œ ë™ê¸°í™” (ì„ê³„ êµ¬ì—­)
       public synchronized static Printer getPrinter(){
         if (printer == null) {
           printer = new Printer(); // Printer ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
         }
         return printer;
       }
       public void print(String str) {
         // ì˜¤ì§ í•˜ë‚˜ì˜ ìŠ¤ë ˆë“œë§Œ ì ‘ê·¼ì„ í—ˆìš©í•¨ (ì„ê³„ êµ¬ì—­)
         // ì„±ëŠ¥ì„ ìœ„í•´ í•„ìš”í•œ ë¶€ë¶„ë§Œì„ ì„ê³„ êµ¬ì—­ìœ¼ë¡œ ì„¤ì •í•œë‹¤.
         synchronized(this) {
           counter++;
           System.out.println(str + counter);
         }
       }
    }
    ```
    

**Reference**

[https://tecoble.techcourse.co.kr/post/2020-11-07-singleton/](https://tecoble.techcourse.co.kr/post/2020-11-07-singleton/)

[https://gmlwjd9405.github.io/2018/07/06/singleton-pattern.html](https://gmlwjd9405.github.io/2018/07/06/singleton-pattern.html)
